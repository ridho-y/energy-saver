<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <link rel="icon" type="image/x-icon" href="/assets/lightning_bolt_logo.png">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Energy Saver</title>
        <link rel="stylesheet" href="index.css">

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    </head>

    <body>
        <nav class="navbar bg-body-tertiary">
            <div class="container-fluid">
                <a class="navbar-brand" href="#">
                    <h2>⚡️ Energy Saver</h2>
                </a>
            </div>
        </nav>
        <br><br>
        <main>
            <h3>Historical Data</h3><br>
            <form class="needs-validation" novalidate>
                <div class="input-group">
                    <span class="input-group-text">Date start</span>
                    <input id="date-start" type="date" class="form-control" placeholder="Date Start" aria-label="Date End" style="max-width: 300px">
                    <div class="invalid-feedback">
                    </div>
                </div>
    
                <br>
                <div class="input-group">
                    <span class="input-group-text">Date end&nbsp;</span>
                    <input id="date-end" type="date" class="form-control" placeholder="Date End" aria-label="Date End" style="max-width: 300px">
                    <div class="invalid-feedback">
                    </div>
                </div>
                <br>
                <div class="input-group">
                    <span class="input-group-text input-group-text-large">Solar energy accumulated</span>
                    <input id="solar-collected" type="number" class="form-control" placeholder="kWh" value="0">
                    <div class="invalid-feedback">
                    </div>
                </div>
                <br>

                <div class="input-group mb-3">
                    <label class="input-group-text input-group-text-medium" for="energy-data" data-toggle="tooltip" title="Upload .xlsx file. Each row represents a day of data and each column represents the kWh used in a 30 minute time period. Therefore, there must be 48 columns in each row.">Upload Data</label>
                    <input id="file-input" type="file" class="form-control" id="energy-data" accept=".xlsx">
                    <div class="invalid-feedback">
                    </div>
                </div>

                <br><hr><br>
                <h3>Plan information</h3>
                <br>

                <div class="btn-group">
                    <input type="radio" class="btn-check" name="options" id="fixed-rate-button" autocomplete="off">
                    <label class="btn btn-outline-primary" for="fixed-rate-button">Fixed Rate</label>
                
                    <input type="radio" class="btn-check" name="options" id="time-of-use-button" autocomplete="off">
                    <label class="btn btn-outline-primary" for="time-of-use-button">Time of Use</label>
                </div>

                <br><br>

                <div class="input-group">
                    <span class="input-group-text">Solar tariff rate</span>
                    <input id="solar-tariff-rate" type="number" class="form-control" placeholder="¢/kWh" value="0">
                    <div class="invalid-feedback">
                    </div>
                </div>
                <br>

                <div class="input-group">
                    <span class="input-group-text" style="width: 130px">Daily charge</span>
                    <input id="daily-charge" type="number" class="form-control" placeholder="¢" value="0">
                    <div class="invalid-feedback">
                    </div>
                </div>
                <br>

                <div id="fixed-rate">
                    <div class="input-group">
                        <span class="input-group-text" style="width: 130px">Rate</span>
                        <input id="fixed-rate-input" type="number" class="form-control" placeholder="$/kWh">
                        <div class="invalid-feedback"></div>
                    </div>
                    <br>
                </div>
            


                <div id="time-of-use">
                    <h4>Summer Period: 1 Nov - 31 Mar</h4>
                    <div class="indent-in-1">
                        <h5>Weekday</h5>
                        <div id="summer-weekday-tou">
                            <div class="input-group mb-3">
                                <span class="input-group-text">Peak&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                                <input type="number" class="sum wday peak cost form-control" placeholder="¢" value="0"><div class="invalid-feedback"></div>
                                <span class="input-group-text" data-toggle="tooltip" title="The hour times for this time period. For example, if peak times are 11am to 3pm and 7pm and 9pm, enter: 11-14,19-20">Times</span>
                                <input type="text" class="sum wday peak times form-control" value="14-19"><div class="invalid-feedback"></div>
                            </div>

                            <div class="input-group mb-3">
                                <span class="input-group-text">Shoulder</span>
                                <input type="number" class="sum wday sh cost form-control" placeholder="¢" value="0"><div class="invalid-feedback"></div>
                                <span class="input-group-text" data-toggle="tooltip" title="The hour times for this time period. For example, if peak times are 11am to 3pm and 7pm and 9pm, enter: 11-14,19-20">Times</span>
                                <input type="text" class="sum wday sh times form-control" value="20-21,7-13"><div class="invalid-feedback"></div>
                            </div>                            
                            <div class="input-group mb-3">
                                <span class="input-group-text">Off-peak</span>
                                <input type="number" class="sum wday offp cost form-control" placeholder="¢" value="0"><div class="invalid-feedback"></div>
                                <span class="input-group-text" data-toggle="tooltip" title="The hour times for this time period. For example, if peak times are 11am to 3pm and 7pm and 9pm, enter: 11-14,19-20">Times</span>
                                <input type="text" class="sum wday offp times form-control" value="22-23,0-6"><div class="invalid-feedback"></div>
                            </div>
                        </div>
                        <div class="invalid-feedback"></div><br>

                        <h5>Weekend</h5>
                        <div id="summer-weekend-tou">
                            <div class="input-group mb-3">
                                <span class="input-group-text">Shoulder</span>
                                <input type="number" class="sum wend sh cost form-control" placeholder="¢" value="0"><div class="invalid-feedback"></div>
                                <span class="input-group-text" data-toggle="tooltip" title="The hour times for this time period. For example, if peak times are 11am to 3pm and 7pm and 9pm, enter: 11-14,19-20">Times</span>
                                <input type="text" class="sum wend sh times form-control" value="20-21,7-13"><div class="invalid-feedback"></div>
                            </div>
                            <div class="input-group mb-3">
                                <span class="input-group-text">Off-peak</span>
                                <input type="number" class="sum wend offp cost form-control" placeholder="¢" value="0"><div class="invalid-feedback"></div>
                                <span class="input-group-text" data-toggle="tooltip" title="The hour times for this time period. For example, if peak times are 11am to 3pm and 7pm and 9pm, enter: 11-14,19-20">Times</span>
                                <input type="text" class="sum wend offp times form-control" value="22-23,0-6"><div class="invalid-feedback"></div>
                            </div>
                        </div>
                        <div class="invalid-feedback"></div>
                    </div>


                    <br>
                    <h4>Autumn Period: 1 Apr - 31 May</h4>
                    <div class="indent-in-1">
                        <div id="autumn-tou indent-in-1">
                            <div class="input-group mb-3">
                                <span class="input-group-text">Shoulder</span>
                                <input type="number" class="aut sh cost form-control" placeholder="¢" value="0"><div class="invalid-feedback"></div>
                                <span class="input-group-text" data-toggle="tooltip" title="The hour times for this time period. For example, if peak times are 11am to 3pm and 7pm and 9pm, enter: 11-14,19-20">Times</span>
                                <input type="text" class="aut sh times form-control" value="20-21,7-13"><div class="invalid-feedback"></div>
                            </div>
                            <div class="input-group mb-3">
                                <span class="input-group-text">Off-peak</span>
                                <input type="number" class="aut offp cost form-control" placeholder="¢" value="0"><div class="invalid-feedback"></div>
                                <span class="input-group-text" data-toggle="tooltip" title="The hour times for this time period. For example, if peak times are 11am to 3pm and 7pm and 9pm, enter: 11-14,19-20">Times</span>
                                <input type="text" class="aut offp times form-control" value="22-23,0-6"><div class="invalid-feedback"></div>
                            </div>
                        </div>
                        <div class="invalid-feedback"></div>
                    </div>

                    <br>
                    <h4>Winter Period: 1 Jun - 31 Aug</h4>
                    <div class="indent-in-1">
                        <h5>Weekday</h5>
                        <div id="winter-weekday-tou">
                            <div class="input-group mb-3">
                                <span class="input-group-text">Peak&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                                <input type="number" class="win wday peak cost form-control" placeholder="¢" value="0"><div class="invalid-feedback"></div>
                                <span class="input-group-text" data-toggle="tooltip" title="The hour times for this time period. For example, if peak times are 11am to 3pm and 7pm and 9pm, enter: 11-14,19-20">Times</span>
                                <input type="text" class="win wday peak times form-control" value="14-19"><div class="invalid-feedback"></div>
                            </div>
                            <div class="input-group mb-3">
                                <span class="input-group-text">Shoulder</span>
                                <input type="number" class="win wday sh cost form-control" placeholder="¢" value="0"><div class="invalid-feedback"></div>
                                <span class="input-group-text" data-toggle="tooltip" title="The hour times for this time period. For example, if peak times are 11am to 3pm and 7pm and 9pm, enter: 11-14,19-20">Times</span>
                                <input type="text" class="win wday sh times form-control" value="20-21,7-13"><div class="invalid-feedback"></div>
                            </div>
                            <div class="input-group mb-3">
                                <span class="input-group-text">Off-peak</span>
                                <input type="number" class="win wday offp cost form-control" placeholder="¢" value="0"><div class="invalid-feedback"></div>
                                <span class="input-group-text" data-toggle="tooltip" title="The hour times for this time period. For example, if peak times are 11am to 3pm and 7pm and 9pm, enter: 11-14,19-20">Times</span>
                                <input type="text" class="win wday offp times form-control" value="22-23,0-6"><div class="invalid-feedback"></div>
                            </div>
                        </div>
                        <div class="invalid-feedback"></div><br>
                        
                        <h5>Weekend</h5>
                        <div id="winter-weekday-tou">
                            <div class="input-group mb-3">
                                <span class="input-group-text">Shoulder</span>
                                <input type="number" class="win wend sh cost form-control" placeholder="¢" value="0"><div class="invalid-feedback"></div>
                                <span class="input-group-text" data-toggle="tooltip" title="The hour times for this time period. For example, if peak times are 11am to 3pm and 7pm and 9pm, enter: 11-14,19-20">Times</span>
                                <input type="text" class="win wend sh times form-control" value="20-21,7-13"><div class="invalid-feedback"></div>
                            </div>
                            <div class="input-group mb-3">
                                <span class="input-group-text">Off-peak</span>
                                <input type="number" class="win wend offp cost form-control" placeholder="¢" value="0"><div class="invalid-feedback"></div>
                                <span class="input-group-text" data-toggle="tooltip" title="The hour times for this time period. For example, if peak times are 11am to 3pm and 7pm and 9pm, enter: 11-14,19-20">Times</span>
                                <input type="text" class="win wend offp times form-control" value="22-23,0-6"><div class="invalid-feedback"></div>
                            </div>
                        </div>
                        <div class="invalid-feedback"></div>
                    </div>
                    <br>
                    <h4>Spring Period: 1 Sep - 31 Oct</h4>
                    <div class="indent-in-1">
                        <div id="sprint-tou indent-in-1">
                            <div class="input-group mb-3">
                                <span class="input-group-text">Shoulder</span>
                                <input type="number" class="spr sh cost form-control" placeholder="¢" value="0"><div class="invalid-feedback"></div>
                                <span class="input-group-text" data-toggle="tooltip" title="The hour times for this time period. For example, if peak times are 11am to 3pm and 7pm and 9pm, enter: 11-14,19-20">Times</span>
                                <input type="text" class="spr sh times form-control" value="20-21,7-13"><div class="invalid-feedback"></div>
                            </div>
                            <div class="input-group mb-3">
                                <span class="input-group-text">Off-peak</span>
                                <input type="number" class="spr offp cost form-control" placeholder="¢" value="0"><div class="invalid-feedback"></div>
                                <span class="input-group-text" data-toggle="tooltip" title="The hour times for this time period. For example, if peak times are 11am to 3pm and 7pm and 9pm, enter: 11-14,19-20">Times</span>
                                <input type="text" class="spr offp times form-control" value="22-23,0-6"><div class="invalid-feedback"></div>
                            </div>
                        </div>
                        <div class="invalid-feedback"></div>
                    </div>
                    <br>
                </div>

                <hr><br>
                <div id="fill-form" style="display: none">Please try again once all components have been filled.</div>
                <h5 id="cost"></h5>
                <br>
                <button id="calculate" type="button" class="btn btn-primary">Calculate your bill</button>
                <br>
            </form>
            <br><br>

            <footer class="d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top">
                <div class="col-md-4 d-flex align-items-center">
                    <a href="https://github.com/ridho-y/energy-saver" target="_blank" style="text-decoration: none">
                        <span class="mb-md-0 text-body-secondary">⚡️ View the source code</span>
                    </a>
                </div>
            
                <div class="d-flex flex-wrap justify-content-between align-items-center links">
                    <a href="mailto:hello.ridhoy@gmail.com">
                        <svg class="contact-logo email" xmlns="http://www.w3.org/2000/svg"
                            xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="0 0 256 256"
                            xml:space="preserve">

                            <defs>
                            </defs>
                            <g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill-rule: nonzero; opacity: 1;"
                                transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)">
                                <path
                                    d="M 45 51.815 l 45 -33.87 v -1.967 c 0 -2.03 -1.646 -3.676 -3.676 -3.676 H 3.676 C 1.646 12.302 0 13.948 0 15.978 v 1.967 L 45 51.815 z"
                                    style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill-rule: nonzero; opacity: 1;"
                                    transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                                <path
                                    d="M 47.405 60.019 c -0.712 0.536 -1.559 0.804 -2.405 0.804 s -1.693 -0.268 -2.405 -0.804 L 0 27.958 v 46.064 c 0 2.03 1.646 3.676 3.676 3.676 h 82.648 c 2.03 0 3.676 -1.646 3.676 -3.676 V 27.958 L 47.405 60.019 z"
                                    style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill-rule: nonzero; opacity: 1;"
                                    transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                            </g>
                        </svg>
                    </a>
                    <a target="_blank" href="https://www.linkedin.com/in/ridho-y-5a9777232/">
                        <svg class="contact-logo linkedin" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path
                                d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z" />
                        </svg>
                    </a>
                    <a target="_blank" href="https://github.com/ridho-y">
                        <svg class="contact-logo github" xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 24 24">
                            <path
                                d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
                        </svg>
                    </a>
                </div>

              </footer>
        </main>
        <br>
        <script src="https://unpkg.com/read-excel-file@5.x/bundle/read-excel-file.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.4.min.js" integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/moment-with-locales.min.js"></script>
        <script type="module" src="script.js"></script>
        <script type="module" src="validation.js"></script>
        <script type="module" src="calculator.js"></script>
    </body>
</html>